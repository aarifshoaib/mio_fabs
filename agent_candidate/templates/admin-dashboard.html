{% extends 'admin-base.html' %}
{% load static %}
{% load base_tags %}
{% block content %}
<!-- Page Header -->
<div class="page-header">
    <div class="row">
        <div class="col-sm-12">
            <h3 class="page-title">Welcome {{request.user}}!</h3>
            <ul class="breadcrumb">
                <li class="breadcrumb-item active">Dashboard</li>
            </ul>
        </div>
    </div>
</div>
<!-- /Page Header -->

<div class="row">
    <div class="col-md-12">
        <div class="card-group m-b-30">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between mb-3">
                        <div>
                            <span class="d-block">Clients</span>
                        </div>
                        <div>
                            <span class="text-success">+{{clients}}</span>
                        </div>
                    </div>
                    <h5 class="mb-3">Buy & Sell <span class="text-success">+{{buy_sell_cnt}}</span> /
                        Staff Needed <span class="text-success">+{{staff_needed}}</span></h5>
                    <div class="progress mb-2" style="height: 5px;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 70%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <p class="mb-0">Total Companies <span class="text-success">+{{companies}}</span></p>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between mb-3">
                        <div>
                            <span class="d-block">Job Ad</span>
                        </div>
                        <div>
                            <span class="text-muted">{{today}}</span>
                        </div>
                    </div>
                    <h5 class="mb-3">Total Jobs<span class="text-success"> +{{jobs_cnt}}</span></h5>
                    <div class="progress mb-2" style="height: 5px;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 70%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <p class="mb-0">Matured Jobs <span class="text-success"> +{{matured_jobs}}</span></p>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between mb-3">
                        <div>
                            <span class="d-block">Agent/Candidate</span>
                        </div>
                        <div>
                            <span class="text-muted">{{today}}</span>
                        </div>
                    </div>
                    <h5 class="mb-3">Agents <span class="text-success"> +{{agent_cnt}}</span></h5>
                    <div class="progress mb-2" style="height: 5px;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 70%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <p class="mb-0">Candidates <span class="text-success">+{{candidate_cnt}}</span></p>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between mb-3">
                        <div>
                            <span class="d-block">Server Info</span>
                        </div>
                        <div>
                            <span class="text-success">Full: {{server_info.total_percent_used}}</span>
                        </div>
                    </div>
                    <h5 class="mb-3">Used Storage <span class="text-success"> {{server_info.user_storage}}</span></h5>
                    <div class="progress mb-2" style="height: 5px;">
                        <div class="progress-bar bg-primary" role="progressbar" style="width: 70%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <p class="mb-0">Total Storage <span class="text-success"> {{server_info.total_storage}}</span></p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Statistics Widget -->
<div class="row">
    <div class="col-md-12 col-lg-12 col-xl-4 d-flex">
        <div class="card flex-fill dash-statistics">
            <div class="card-body">
                <h5 class="card-title">EPOL Status</h5>
                <div class="stats-list">
                    <div class="stats-info">
                        <p>Overall <strong>{{workpass_counts.0}} <small>/ {{workpass_counts.0}}</small></strong></p>
                        <div class="progress">
                            <div class="progress-bar bg-primary" role="progressbar" style="width: 100%" aria-valuenow="31" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="stats-info">
                        <p>Pending Status <strong>{{workpass_counts.1.0}}  <small>/ {{workpass_counts.0}} </small></strong></p>
                        <div class="progress">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: {{workpass_counts.1.1}}%" aria-valuenow="31" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="stats-info">
                        <p>Pending Doc Status <strong>{{workpass_counts.2.0}} <small>/ {{workpass_counts.0}}</small></strong></p>
                        <div class="progress">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: {{workpass_counts.2.1}}%" aria-valuenow="62" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="stats-info">
                        <p>Approved Status <strong>{{workpass_counts.3.0}} <small>/ {{workpass_counts.0}}</small></strong></p>
                        <div class="progress">
                            <div class="progress-bar bg-success" role="progressbar" style="width: {{workpass_counts.3.1}}%" aria-valuenow="62" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    <div class="stats-info">
                        <p>Rejected <strong>{{workpass_counts.4.0}} <small>/ {{workpass_counts.0}}</small></strong></p>
                        <div class="progress">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: {{workpass_counts.4.1}}%" aria-valuenow="22" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-12 col-lg-6 col-xl-4 d-flex">
        <div class="card flex-fill">
            <div class="card-body">
                <h4 class="card-title">Email Tracker</h4>
                <div class="statistics">
                    <div class="row">
                        <div class="col-md-6 col-6 text-center">
                            <div class="stats-box mb-4">
                                <p>Total Emails</p>
                                <h3>{{total_email}}</h3>
                            </div>
                        </div>
                        <div class="col-md-6 col-6 text-center">
                            <div class="stats-box mb-4">
                                <p>Unread Mails</p>
                                <h3>{{unread_mails}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="progress mb-4">
                    <div class="progress-bar bg-purple" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">{{total_email}}</div>
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 22%" aria-valuenow="18" aria-valuemin="0" aria-valuemax="100">{{read_mails}}</div>
                    <div class="progress-bar bg-success" role="progressbar" style="width: 24%" aria-valuenow="12" aria-valuemin="0" aria-valuemax="100">{{unread_mails}}</div>
                    <div class="progress-bar bg-info" role="progressbar" style="width: 26%" aria-valuenow="14" aria-valuemin="0" aria-valuemax="100">{{email_users}}</div>
                    <div class="progress-bar bg-danger" role="progressbar" style="width: 10%" aria-valuenow="14" aria-valuemin="0" aria-valuemax="100">0</div>
                </div>
                <div>
                    <p><i class="fa fa-dot-circle-o text-purple mr-2"></i>Total Mails <span class="float-right">{{total_email}}</span></p>
                    <p><i class="fa fa-dot-circle-o text-warning mr-2"></i>Read Mails <span class="float-right">{{read_mails}}</span></p>
                    <p><i class="fa fa-dot-circle-o text-success mr-2"></i>Unread Mails <span class="float-right">{{unread_mails}}</span></p>
                    <p><i class="fa fa-dot-circle-o text-info mr-2"></i>Total User <span class="float-right">{{email_users}}</span></p>
                    <p class="mb-0"><i class="fa fa-dot-circle-o text-danger mr-2"></i><a href="#"><u>Need To Change App Password</u></a> 
			<span class="float-right"><a href="#" data-toggle="popover" data-html="true" title="Emails" data-content="{{email_not_works_list}}">{{email_not_works_cnt}}</a></span>
		    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-12 col-lg-6 col-xl-4 d-flex">
        <div class="card flex-fill">
            <div class="card-body">
                <h4 class="card-title">Application Queue <span class="badge bg-inverse-danger ml-2">{{app_queue_cnt}}</span></h4>
                {% for app_q in app_queue %}
                <div class="leave-info-box">
                    <div class="media align-items-center">
                        <a href="#" class="avatar"><img alt="" src="{% static 'assets/img/user.jpg' %}"></a>
                        <div class="media-body">
                            <div class="text-sm my-0 text-purple">{{app_q.staff}} (Staff)</div>
                        </div>
                    </div>
                    <div class="row align-items-center mt-3">
                        <div class="col-6">
                            <h6 class="mb-0">{{app_q.app_date}}</h6>
                            <span class="text-sm text-muted">{{app_q.assigned_by}} (Assigned)</span>
                        </div>
                        <div class="col-6 text-right">
                            <span class="badge bg-inverse-danger">{{app_q.status|data_padding}}</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
                <div class="load-more text-center">
                    <a class="text-dark" href="/mom-application/app-queue-list">Load More</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /Statistics Widget -->

{% endblock %}

{% block jslink %}
<script>
    $(document).ready(function(){
      $('[data-toggle="popover"]').popover();
    });
    </script>
{% endblock %}
